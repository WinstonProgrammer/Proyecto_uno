import tkinter as tk
from tkinter import ttk
from tkinter import messagebox
from tkinter import *
import socket


#Ventana
root = tk.Tk()
root.config(width=800, height=400)
root.configure(bg="darkred")
root.title("ANT-0T0")

#Acciones del robot
def irAdelante(event = None):
    clientSocket.send(bytes([ord('w')]))

def irAtras(event = None):
    clientSocket.send(bytes([ord('s')]))
    
def irIzquierda(event = None):
    clientSocket.send(bytes([ord('a')]))

def irDerecha(event = None):
    clientSocket.send(bytes([ord('d')]))

def parar(event = None):
    clientSocket.send(bytes([ord('t')]))

def inicioLanzar(event = None):
    clientSocket.send(bytes([ord('l')]))

#Interacción con el servidor
def getAddress():
    ip_root = Tk()
    ip_root.geometry("200x100")

    dato = StringVar(ip_root)
    ip_root.title("Configurar Ip")
    ip = ttk.Entry(ip_root, textvariable=dato).place(x=10,y=10)
    button = Button(ip_root, text ="Aplicar",command=lambda:[conectar(dato.get()), ip_root.destroy()]).place(x=30,y=40)
    print(dato.get())

def conectar(address):
    port = 2222
    try:
        clientSocket.connect((address,port))
        messagebox.showinfo("Mensaje Servido","Cliente conectado al robot: {0} : {1}".format(address,port))
    except socket.error:
        messagebox.showwarning("Conexión erronea","No se ha logrado al conexíon, verifique la ip {0}".format(address))
        getAddress()
        clientSocket.close()

#Boton Conectar
button_connect = tk.Button(root, text = "Conectar",command=getAddress,font=("Arial",12)).place(x=350,y=260)

clientSocket = socket.socket()
port = 2222
ipAddress = ""
root.mainloop()
